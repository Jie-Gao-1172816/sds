{% extends "base.html" %}
{% block content %}

<!-- Page heading -->
<h2>Enrol in a Class</h2>

<!-- Selected student information (read-only display) -->
<p>
  <strong>Student:</strong>
  {{ student['last_name'] }}, {{ student['first_name'] }}
</p>

<!-- If the student has at least one eligible class, show the enrolment form-->
{% if eligible_classes and eligible_classes|length > 0 %}

<form method="post" action="{{ url_for('student_enrol') }}">

  <!-- Hidden student ID Used to identify which student is being enrolled -->
  <input type="hidden" name="student_id" value="{{ student['student_id'] }}">

  <!-- Class selection dropdown -->
  <div class="mb-3">
    <label class="form-label">
      Select a class
    </label>

    <select name="class_id" class="form-select" required>
      <!-- Each option represents one eligible class -->
      {% for c in eligible_classes %}
        <option value="{{ c['class_id'] }}">
          {{ c['dancetype_name'] }} - {{ c['class_name'] }}
          (Grade {{ c['grade_name'] }})
          - {{ c['schedule_day'] }} {{ c['schedule_time'] }}
        </option>
      {% endfor %}
    </select>
  </div>

  <!-- Submit enrolment -->
  <button class="btn btn-dark" type="submit">
    Enrol
  </button>

  <!-- Cancel enrolment and return to class summary -->
  <a class="btn btn-outline-dark"
     href="{{ url_for('student_class_summary', student_id=student['student_id']) }}">
    Cancel
  </a>

</form>

<!-- If no eligible classes are available, display a warning message-->
{% else %}

<div class="alert alert-warning">
  No eligible classes available for this student.
</div>

<!-- Back to student class summary -->
<a class="btn btn-outline-dark"
   href="{{ url_for('student_class_summary', student_id=student['student_id']) }}">
  Back
</a>

{% endif %}

{% endblock %}
