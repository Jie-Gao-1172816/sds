{% extends "base.html" %}

{% block title %}Classes - SDS{% endblock %}

{% block content %}

<h2>Classes</h2>

<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>Class ID</th>
      <th>Class Name</th>
      <th>Dance Type</th>
      <th>Grade</th>
      <th>Enrolled Student<br>First Name</th>
      <th>Enrolled Student<br>Last Name</th>

    </tr>
  </thead>

  <tbody>
    {% set ns = namespace(prev_class_id=None) %}

  {% for row in classes %}
<tr>
  {% if row['class_id'] != ns.prev_class_id %}
    <td>{{ row['class_id'] }}</td>
    <td class="fw-semibold"><strong>{{ row['class_name'] }}</strong></td>
    <td>{{ row['dance_type'] }}</td>
    <td>{{ row['grade_name'] }}</td>
    {% set ns.prev_class_id = row['class_id'] %}
  {% else %}
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  {% endif %}


      <td>
        {% if row['first_name'] %}
          <a href="{{ url_for('class_summary', student_id=row['student_id']) }}">
            {{ row['first_name'] }}
          </a>
        {% else %}
          No student enrolled
        {% endif %}
      </td>
      <td>
        {% if row['last_name'] %}
          <a href="{{ url_for('class_summary', student_id=row['student_id']) }}">
            {{ row['last_name'] }}
          </a>
        {% else %}
          No student enrolled
        {% endif %}
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>

{% endblock %}

