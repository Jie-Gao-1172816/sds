{% extends "base.html" %}


{% block title %}Students - SDS{% endblock %}

{% block content %}


<!--  Page title-->
<h2 class="mb-4">Students</h2>

<!-- Search form + Add Student button-->
<form method="get" action="{{ url_for('student_list') }}" class="mb-4">
  <div class="d-flex justify-content-between align-items-center">

    <!-- Search input + button (left side) -->
    <div class="d-flex gap-2 col-md-6">

      <input
        type="text"
        name="q"
        class="form-control"
        placeholder="Search by first or last name"
        value="{{ request.args.get('q', '') }}">

      <button type="submit" class="btn btn-dark">
        Search
      </button>

    </div>

    <!-- Add Student button (right side) -->
    <a href="{{ url_for('add_student') }}" class="btn btn-dark ">
      Add Student
    </a>

  </div>
</form>



<!-- Student list table-->
    
<table class="table table-striped table-borderless table-hover align-middle">

  <!-- Table header -->
  <thead class="table-dark">
  <tr>
  
    <th class="text-center align-middle text-nowrap">Last Name</th>
    <th class="text-center align-middle text-nowrap">First Name</th>
    <th class="text-center align-middle text-nowrap">Email</th>
    <th class="text-center align-middle text-nowrap">Date of Birth</th>
    <th class="text-center align-middle text-nowrap">Phone</th>
    <th class="text-center align-middle text-nowrap">Enrollment Date</th>
    <th class="text-center align-middle text-nowrap">Edit</th>
    <th class="text-center align-middle text-nowrap">Enrol in a Class</th>
  </tr>
</thead>


 
  <tbody>
    {% for student in students %}
    <tr>

      <!-- Link to student class summary page -->
      <td>
        <a href="{{ url_for('student_class_summary', student_id=student['student_id']) }}"
           class="link-dark link-underline-opacity-0 link-underline-opacity-100-hover fw-semibold">
          {{ student['last_name'] }}
        </a>
      </td>

     
      <td>
        <a href="{{ url_for('student_class_summary', student_id=student['student_id']) }}"
           class="link-dark link-underline-opacity-0 link-underline-opacity-100-hover fw-semibold">
          {{ student['first_name'] }}
        </a>
      </td>

      <!--  student details -->
      <td class="text-center align-middle">{{ student['email'] }}</td>
      <td class="text-center align-middle">{{ student['date_of_birth'] }}</td>
      <td class="text-center align-middle">{{ student['phone'] }}</td>
      <td class="text-center align-middle">{{ student['enrollment_date'] }}</td>

      <!-- Edit button Links to edit_student with the selected student_id -->
      <td class="text-center align-middle">
        <div class="d-grid col-10 mx-auto">
          <a class="btn btn-outline-dark btn-sm"
             href="{{ url_for('edit_student', student_id=student.student_id) }}">
             Edit
          </a>
        </div>
      </td>

      <!-- Enrol in a Class button Links to student_enrol with the selected student_id -->
      <td class="text-center align-middle">
        <div class="d-grid col-10 mx-auto">
          <a class="btn btn-outline-dark btn-sm text-nowrap"
             href="{{ url_for('student_enrol', student_id=student.student_id) }}">
             Enrol in a Class
          </a>
        </div>
      </td>

    {% endfor %}
  </tbody>
</table>

{% endblock %}
