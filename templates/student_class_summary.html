{% extends "base.html" %}

{% block title %}Student Class Summary - SDS{% endblock %}

{% block content %}

<!-- Page Title-->
<div class="mb-3">
  <h2 class="mb-1">Student Class Summary</h2>
  
</div>

<!-- Student Information Card-->


    <!-- Student full name -->
    <div class="fw-semibold fs-5 mb-2">
      {{ student['last_name'] }}, {{ student['first_name'] }}
    </div>

    <!-- Student details -->
    <div class="text-muted small">


      <!-- Student email (only shown if exists) -->
      {% if student['email'] %}
      <div>
        Email: {{ student['email'] }}
      </div>
      {% endif %}

      <!-- Student phone (only shown if exists) -->
      {% if student['phone'] %}
      <div>
        Phone: {{ student['phone'] }}
      </div>
      {% endif %}

    </div>

 



<!-- Class List Table-->
{% if classes and classes|length > 0 %}

<div class="table-responsive">
  <table class="table  table-hover table-borderless align-middle">
    <thead class="table-secondary">
      <tr>
        <th>Class Name</th>
        <th style="width: 160px;">Dance Type</th>
        <th style="width: 150px;">Grade</th>
        <th style="width: 120px;">Day</th>
        <th style="width: 120px;">Time</th>
      </tr>
    </thead>
    <!-- Class rows -->
    <tbody>
      {% for class_row in classes %}
      <tr>

        <td class="fw-semibold">
          {{ class_row['class_name'] }}
        </td>

        <td>
          {{ class_row['dancetype_name'] }}
        </td>

        <td>
          {% if class_row['grade_name'] %}
            {{ class_row['grade_name'] }}
           
          {% else %}
            <span class="text-muted">No grade</span>
          {% endif %}
        </td>
        <td>{{ class_row['schedule_day'] }}</td>
        <td>{{ class_row['schedule_time'] }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>



<!-- Current Grades (from studentgrades) -->
<h5 class="mt-4">Current Grades</h5>

{% if current_grades and current_grades|length > 0 %}
  <table class="table table-hover table-borderless align-middle table-sm">
    <thead class="table-secondary">
      <tr>
        <th>Dance Type</th>
        <th>Grade</th>
      </tr>
    </thead>
    <tbody>
      {% for cg in current_grades %}
        <tr>
          <td>{{ cg.dancetype_name }}</td>
          <td>{{ cg.grade_name }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <div class="text-muted">No grades recorded for this student.</div>
{% endif %}



{% endif %}

<!-- Action buttons -->
<div class="d-flex justify-content-center gap-3 mt-4 mb-4">

    <a href="{{ url_for('student_list') }}"
       class="btn btn-outline-secondary px-4">
        Back to Student List
    </a>

    <a href="{{ url_for('edit_student', student_id=student.student_id) }}"
       class="btn btn-outline-dark px-4">
        Edit
    </a>

    <a href="{{ url_for('student_enrol', student_id=student.student_id) }}"
       class="btn btn-dark px-4">
        Enrol in a Class
    </a>

</div>


{% endblock %}
